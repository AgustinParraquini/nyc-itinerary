<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Itinerario Nueva York - Mayo 2024</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
        }
        #map {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
        }
        .day-selector {
            position: fixed;
            top: 10px;
            left: 10px;
            width: 250px;
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        .day-info-panel {
            position: fixed;
            top: 10px;
            right: 10px;
            width: 350px;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-height: 90vh;
            overflow-y: auto;
            display: none;
            z-index: 1000;
        }
        .day-button {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            text-align: left;
            font-size: 14px;
            transition: opacity 0.2s;
        }
        .day-button:hover {
            opacity: 0.9;
        }
        .schedule-item {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        .time {
            width: 80px;
            font-weight: bold;
            color: #333;
        }
        .activity {
            flex-grow: 1;
            padding-left: 10px;
        }
        .note {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div class="day-selector">
        <h4 style="margin: 0 0 15px 0;">Selecciona un día:</h4>
        <div id="day-buttons"></div>
    </div>
    <div class="day-info-panel" id="day-info">
        <h3 id="day-title" style="margin: 0 0 10px 0;"></h3>
        <h4 id="day-subtitle" style="margin: 0 0 15px 0; color: #666;"></h4>
        <div id="day-note" style="margin-bottom: 20px;"></div>
        <div id="day-schedule"></div>
        <div id="day-extra-info" style="margin-top: 20px; color: #666;"></div>
    </div>

    <script>
        // Datos del itinerario
        const days = {
            "Día 1 - Jueves 08/05": [
                {"name": "Hotel Paramount", "coords": [40.7560, -73.9860]},
                {"name": "Times Square", "coords": [40.7580, -73.9855]},
                {"name": "Bryant Park & Biblioteca Pública", "coords": [40.7536, -73.9832]},
                {"name": "SUMMIT One Vanderbilt", "coords": [40.7523, -73.9777]},
                {"name": "Cena en Times Square", "coords": [40.7580, -73.9855]}
            ],
            "Día 2 - Viernes 09/05": [
                {"name": "Bow Bridge, Central Park", "coords": [40.7759, -73.9719]},
                {"name": "Museo MET", "coords": [40.7794, -73.9632]},
                {"name": "Museo de Historia Natural", "coords": [40.7813, -73.9735]},
                {"name": "Apple Store de vidrio", "coords": [40.7635, -73.9726]},
                {"name": "Museo Guggenheim", "coords": [40.7830, -73.9590]},
                {"name": "Rooftop Somewhere Nowhere", "coords": [40.7580, -73.9855]}
            ],
            "Día 3 - Sábado 10/05": [
                {"name": "Empire State Building", "coords": [40.7484, -73.9857]},
                {"name": "Madison Square Park", "coords": [40.7420, -73.9876]},
                {"name": "Madison Square Garden", "coords": [40.7505, -73.9934]},
                {"name": "Madame Tussauds", "coords": [40.7564, -73.9884]},
                {"name": "Grand Central Terminal", "coords": [40.7527, -73.9772]},
                {"name": "Bar 230", "coords": [40.7508, -73.9887]}
            ],
            "Día 4 - Domingo 11/05": [
                {"name": "Puente de Brooklyn (Manhattan)", "coords": [40.7061, -74.0086]},
                {"name": "DUMBO", "coords": [40.7033, -73.9881]},
                {"name": "Time Out Market", "coords": [40.7022, -73.9881]},
                {"name": "Brooklyn Museum", "coords": [40.6712, -73.9636]},
                {"name": "Brooklyn Botanic Garden", "coords": [40.6694, -73.9624]},
                {"name": "Brooklyn Bridge Park", "coords": [40.7003, -73.9967]}
            ],
            "Día 5 - Lunes 12/05": [
                {"name": "Battery Park (Ferry Estatua Libertad)", "coords": [40.7033, -74.0170]},
                {"name": "One World Observatory", "coords": [40.7127, -74.0134]},
                {"name": "Oculus", "coords": [40.7115, -74.0097]},
                {"name": "Eataly Downtown", "coords": [40.7101, -74.0097]},
                {"name": "Wall Street / Charging Bull", "coords": [40.7055, -74.0113]},
                {"name": "Memorial 11-S", "coords": [40.7115, -74.0132]},
                {"name": "Tribeca (Cena)", "coords": [40.7163, -74.0086]}
            ],
            "Día 6 - Martes 13/05": [
                {"name": "Grand Central Terminal (Inicio NYC Boroughs Tour)", "coords": [40.7527, -73.9772]},
                {"name": "Radio City Music Hall", "coords": [40.7590, -73.9805]},
                {"name": "Catedral St. John the Divine", "coords": [40.8061, -73.9626]},
                {"name": "Pier 83 (Embarque Harbor Cruise)", "coords": [40.7527, -74.0071]},
                {"name": "Harbor Lights Cruise", "coords": [40.7527, -74.0071]}
            ],
            "Día 7 - Miércoles 14/05": [
                {"name": "Vessel en Hudson Yards", "coords": [40.7542, -74.0010]},
                {"name": "Pier 57", "coords": [40.7443, -74.0052]},
                {"name": "Quinta y Séptima Avenidas", "coords": [40.7520, -73.9800]},
                {"name": "Apollo Theater (Harlem)", "coords": [40.8100, -73.9500]}
            ]
        };

        const colors = {
            "Día 1 - Jueves 08/05": "red",
            "Día 2 - Viernes 09/05": "blue",
            "Día 3 - Sábado 10/05": "green",
            "Día 4 - Domingo 11/05": "purple",
            "Día 5 - Lunes 12/05": "orange",
            "Día 6 - Martes 13/05": "darkred",
            "Día 7 - Miércoles 14/05": "cadetblue"
        };

        const dayDetails = {
            "Día 1 - Jueves 08/05": {
                "title": "Nueva York - Midtown Manhattan",
                "schedule": [
                    {"time": "07:20 AM", "activity": "Llegada a NYC"},
                    {"time": "10:00 AM", "activity": "Llegada al hotel (Paramount Hotel) y dejar maletas"},
                    {"time": "10:30 AM", "activity": "Desayuno cerca de Times Square"},
                    {"time": "11:30 AM", "activity": "Recorrido por Times Square y fotos (1h)"},
                    {"time": "12:30 PM", "activity": "Caminata hacia Bryant Park y la Biblioteca Pública", "note": "Tiempo de caminata: 10 min"},
                    {"time": "02:00 PM", "activity": "Descanso / snack"},
                    {"time": "04:30 PM", "activity": "SUMMIT One Vanderbilt", "note": "Entrada 5:00 PM - atardecer"},
                    {"time": "07:00 PM", "activity": "Cena en Times Square"}
                ]
            },
            // ... [El resto de los detalles de los días se mantienen igual]
        };

        // Inicializar el mapa
        const map = L.map('map').setView([40.7580, -73.9855], 12);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // Crear capas para cada día
        const layers = {};
        Object.entries(days).forEach(([day, stops]) => {
            const layer = L.featureGroup();
            const coordsList = [];

            stops.forEach(stop => {
                coordsList.push(stop.coords);
                L.marker(stop.coords)
                    .bindPopup(stop.name)
                    .setIcon(L.icon({
                        iconUrl: `https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-${colors[day]}.png`,
                        shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',
                        iconSize: [25, 41],
                        iconAnchor: [12, 41],
                        popupAnchor: [1, -34],
                        shadowSize: [41, 41]
                    }))
                    .addTo(layer);
            });

            L.polyline(coordsList, {color: colors[day], weight: 3}).addTo(layer);
            layers[day] = layer;
        });

        // Crear botones para cada día
        const buttonsContainer = document.getElementById('day-buttons');
        Object.keys(days).forEach(day => {
            const button = document.createElement('button');
            button.className = 'day-button';
            button.style.backgroundColor = colors[day];
            button.textContent = day;
            button.onclick = () => toggleDay(day);
            buttonsContainer.appendChild(button);
        });

        function createScheduleHTML(schedule) {
            return schedule.map(item => `
                <div class="schedule-item">
                    <div class="time">${item.time}</div>
                    <div class="activity">
                        <div>${item.activity}</div>
                        ${item.note ? `<div class="note">${item.note}</div>` : ''}
                    </div>
                </div>
            `).join('');
        }

        function toggleDay(selectedDay) {
            // Limpiar capas anteriores
            Object.values(layers).forEach(layer => map.removeLayer(layer));
            
            // Agregar la capa seleccionada
            layers[selectedDay].addTo(map);
            
            // Ajustar la vista
            map.fitBounds(layers[selectedDay].getBounds(), {padding: [50, 50]});

            // Actualizar panel informativo
            const details = dayDetails[selectedDay];
            const dayInfo = document.getElementById('day-info');
            const dayTitle = document.getElementById('day-title');
            const daySubtitle = document.getElementById('day-subtitle');
            const dayNote = document.getElementById('day-note');
            const daySchedule = document.getElementById('day-schedule');
            
            dayInfo.style.display = 'block';
            dayTitle.textContent = selectedDay;
            dayTitle.style.color = colors[selectedDay];
            daySubtitle.textContent = details.title;
            dayNote.innerHTML = details.note || '';
            daySchedule.innerHTML = createScheduleHTML(details.schedule);
        }
    </script>
</body>
</html>  
